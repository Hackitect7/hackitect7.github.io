{{- define "main" -}}
  {{- $lang := .Site.Language.Lang -}}

  {{/* locales/<lang>/contacts.yaml -> –∫–æ—Ä–µ–Ω—å contacts: */}}
  {{- $contRoot := (index site.Data $lang "contacts") | default (index site.Data "us" "contacts") -}}
  {{- $cont := (index $contRoot "contacts") | default dict -}}

  {{/* UI (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ; –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Ñ–æ–ª—Ç–æ–≤ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏) */}}
  {{- $uiRoot := (index site.Data $lang "ui") | default (index site.Data "us" "ui") -}}
  {{- $ui := (index $uiRoot "ui") | default dict -}}

  <section class="contacts-page">
    {{/* HERO */}}
    <section class="hero">
      <h1>{{ or (index $cont "title") (index $ui "contacts" "title") "Contacts" }}</h1>
      {{- with (index $cont "intro") -}}<p class="tagline">{{ . }}</p>{{- end -}}

      <div class="contacts-grid">
        {{/* –õ–ï–í–ê–Ø –∫–æ–ª–æ–Ω–∫–∞: –ø—Ä–æ—Ñ–∏–ª—å + –∫–∞–Ω–∞–ª—ã */}}
        <div class="card">
          {{- $person := (index $cont "person") | default dict -}}
          {{- with (index $person "name")  }}<h2>{{ . }}</h2>{{- end -}}
          {{- with (index $person "title") }}<p class="sub">{{ . }}</p>{{- end -}}

          <ul class="contact-meta">
            {{- $tz := (index $person "timezone") -}}
            {{- $rh := (index $person "reply_hours") -}}
            {{- if or $tz $rh -}}
              <li>
                {{- with $tz -}}‚è∞ {{ . }}{{- end -}}
                {{- if and $tz $rh -}} ¬∑ {{- end -}}
                {{- with $rh -}}{{ . }}{{- end -}}
              </li>
            {{- end -}}
            {{- with (index $person "languages")    -}}<li>üó£Ô∏è {{ . }}</li>{{- end -}}
            {{- with (index $person "availability") -}}<li>üü¢ {{ . }}</li>{{- end -}}
          </ul>

          <div class="contact-channels">
            {{- with (index $cont "channels") -}}
              {{- range . -}}
                <a
                  class="contact-item"
                  href="{{ .href }}"
                  rel="noopener noreferrer"
                  target="_blank"
                >
                  {{- with .icon    -}}<span class="ci-ico">{{ . }}</span>{{- end -}}
                  {{- with .label   -}}<span class="ci-label">{{ . }}</span>{{- end -}}
                  {{- with .display -}}<span class="ci-value">{{ . }}</span>{{- end -}}
                </a>
              {{- end -}}
            {{- end -}}
          </div>

          <div class="contact-actions">
            {{- $assets := (index $cont "assets") | default dict -}}
            {{- $vHref := or (index $assets "vcard_href") "/vcard/hackitect7.vcf" -}}
            {{- $vText := or (index $assets "vcard_text") "Download vCard (.vcf)" -}}
            <a class="btn secondary" href="{{ $vHref | relURL }}">{{ $vText }}</a>
          </div>
        </div>

        {{/* –ü–†–ê–í–ê–Ø –∫–æ–ª–æ–Ω–∫–∞: —Ñ–æ—Ä–º–∞ (–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä) */}}
        <div class="card" id="contact-form">
          {{- $form := (index $cont "form") | default dict -}}
          <h2>{{ or (index $form "title") "Send a message" }}</h2>
          {{- with (index $form "lead") -}}<p class="sub">{{ . }}</p>{{- end -}}

          <div class="form-placeholder">
            <div class="form-placeholder-inner">
              <p style="margin:0">{{ or (index $form "soon") "Form will appear here shortly." }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    {{/* JSON-LD */}}
    {{- with (index $cont "person") -}}
      <script type="application/ld+json">
        {{- dict
          "@context" "https://schema.org"
          "@type"    "Person"
          "name"     (or .name  "Aleksei Polovinkin")
          "jobTitle" (or .title "IT Infrastructure Architect ‚Ä¢ DevOps & Automation")
          "telephone" "+996501141183"
          "url"       $.Site.BaseURL
          "sameAs"    (slice "https://linkedin.com/in/hackitect7" "https://github.com/Hackitect7" "https://t.me/Manfred251278")
        | jsonify -}}
      </script>
    {{- end -}}
  </section>
{{- end -}}
