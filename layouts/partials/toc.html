{{- $title := .title | default "Overview" -}}
{{- $items := .items | default (slice) -}}

{{- if gt (len $items) 0 -}}
  <div class="toc-wrap">
    <!-- Mobile TOC -->
    <details class="toc-mobile">
      <summary class="toc-toggle">{{ $title }}</summary>
      <nav class="toc-drawer toc-spy" aria-label="{{ $title }}">
        <ul>
          {{- range $items -}}
            {{- $id := .id | default "" -}}
            {{- $txt := .title | default "" -}}
            {{- if and $id $txt -}}
              <li>
                <a class="toc-link" href="{{ printf "#%s" $id | safeURL }}" data-target="{{ $id }}">
                  {{ $txt | plainify }}
                </a>
              </li>
            {{- end -}}
          {{- end -}}
        </ul>
      </nav>
    </details>

    <!-- Sidebar TOC (desktop) -->
    <aside class="services-toc card toc-spy" aria-label="{{ $title }}">
      <h3>{{ $title }}</h3>
      <ul>
        {{- range $items -}}
          {{- $id := .id | default "" -}}
          {{- $txt := .title | default "" -}}
          {{- if and $id $txt -}}
            <li>
              <a class="toc-link" href="{{ printf "#%s" $id | safeURL }}" data-target="{{ $id }}">
                {{ $txt | plainify }}
              </a>
            </li>
          {{- end -}}
        {{- end -}}
      </ul>
    </aside>
  </div>
{{- end -}}
